# ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
# ç”»é¢é·ç§»
# ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½

# webã‚µã‚¤ãƒˆã¯ãƒªãƒ­ãƒ¼ãƒ‰ã‚’è¡Œã†ã¨ãƒ‡ãƒ¼ã‚¿ãŒåˆæœŸåŒ–ã•ã‚Œã‚‹
# ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«å€¤ã‚’ä¿å­˜ã™ã‚‹ã“ã¨ã§ã€ãƒªãƒ­ãƒ¼ãƒ‰å¾Œã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã™ã‚‹ã“ã¨ãŒã§ãã‚‹
# ä¾‹ï¼‰ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã€è¡¨ç¤ºè¡¨ç¤ºã™ã‚‹ç”»é¢ãªã©

#import
import streamlit as st
import time # 3 è¿½åŠ 

# 4 ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆapp.pyï¼‰ã®ãƒ‘ã‚¹ã‚’æ§‹ç¯‰
class_project = {
    "1å¹´1çµ„": ["ãŠåŒ–ã‘å±‹æ•·", "ãŠåŒ–ã‘å±‹æ•·ï¼ãƒ‰ã‚­ãƒ‰ã‚­ã®ä½“é¨“ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚", "æš—ã„æ•™å®¤ã®ä¸­ã§ã€æœ¬æ ¼çš„ãªæ¼”å‡ºã¨ä»•æ›ã‘ãŒæº€è¼‰ã®ãŠåŒ–ã‘å±‹æ•·ã‚’ä½“é¨“ã§ãã¾ã™ã€‚", "images/class_1_1.jpg"],
    "1å¹´2çµ„": ["ã‚«ãƒ•ã‚§", "ã‚«ãƒ•ã‚§â˜•ï¸ã§ã‚†ã£ãŸã‚Šã¨ä¼‘æ†©ã—ã¾ã›ã‚“ã‹ï¼Ÿ", "æ‰‹ä½œã‚Šã‚¹ã‚¤ãƒ¼ãƒ„ã¨ãƒ‰ãƒªãƒ³ã‚¯ã‚’æä¾›ã™ã‚‹ã€è½ã¡ç€ã„ãŸç©ºé–“ã®ã‚«ãƒ•ã‚§ã§ã™ã€‚", "images/class_1_2.jpg"],
    "3å¹´1çµ„": ["ç¸æ—¥å±‹å°", "ç¸æ—¥é¢¨å±‹å°ï¼å°„çš„ã‚„ãƒ¨ãƒ¼ãƒ¨ãƒ¼é‡£ã‚Šã‚‚ã‚ã‚Šã¾ã™ã€‚", "æ—¥æœ¬ã®ä¼çµ±çš„ãªç¸æ—¥ã‚’å†ç¾ã—ãŸå±‹å°ã§ã€æ¥½ã—ã„ã‚²ãƒ¼ãƒ ã‚„æ™¯å“ãŒç››ã‚Šã ãã•ã‚“ã€‚", "images/class_3_1.jpg"],
    "å›³æ›¸å®¤": ["æ­¦å°†ãƒ•ã‚§ã‚¢", "æ­¦å°†ãƒ•ã‚§ã‚¢é–‹å‚¬ï¼ã‚†ã‹ã‚Šã®æ–‡æ›¸ã‚’è¾¿ã‚ã†ã€‚", "æˆ¦å›½æ­¦å°†ã«é–¢ã™ã‚‹æ›¸ç±ã‚„å±•ç¤ºã‚’é›†ã‚ãŸãƒ•ã‚§ã‚¢ã€‚è§£èª¬ãƒ‘ãƒãƒ«ã‚‚å……å®Ÿã€‚", "images/class_3_1.jpg"],
    "éŸ³æ¥½å®¤": ["éŸ³æ¥½ãƒ•ã‚§ã‚¹", "è»½éŸ³æ¥½éƒ¨ã«ã‚ˆã‚‹éŸ³æ¥½ãƒ•ã‚§ã‚¹ï¼ç†±ãç››ã‚Šã‚ãŒã‚ã†ã€‚", "æ ¡å†…ãƒãƒ³ãƒ‰ã‚„ã‚²ã‚¹ãƒˆãŒå‡ºæ¼”ã™ã‚‹éŸ³æ¥½ã‚¤ãƒ™ãƒ³ãƒˆã€‚æ‰‹æ‹å­ãƒ»å£°æ´å¤§æ­“è¿ï¼", "images/class_3_1.jpg"],
    "å›³å·¥å®¤": ["ã‚‚ã®ã¥ãã‚Šä½“é¨“", "å»ƒæã‚’ä½¿ã£ãŸæ—¥æ›œå¤§å·¥ã€ãƒ•ãƒ©ã‚¤ãƒ‘ãƒ³è£½ä½œ", "å·¥å…·ã‚’ä½¿ã£ã¦æœ¬æ ¼çš„ãªDIYãŒä½“é¨“ã§ãã¾ã™ã€‚ãŠåœŸç”£ã«æŒã¡å¸°ã‚Šå¯èƒ½ã€‚", "images/class_3_1.jpg"],
    "å®¶åº­ç§‘å®¤": ["ãŠè“å­æ•™å®¤", "ãŠè“å­ä½œã‚Šæ•™å®¤ï¼ç¾å‘³ã—ã„ã‚¯ãƒƒã‚­ãƒ¼ã®ç„¼ãæ–¹ã‚’ä¼æˆ", "å®¶åº­ç§‘éƒ¨ç›£ä¿®ã®ãŠè“å­ä½œã‚Šä½“é¨“ã€‚ãƒ¬ã‚·ãƒ”ä»˜ãã§è‡ªå®…ã§ã‚‚å†ç¾OKã€‚", "images/class_3_1.jpg"],
    "ç†ç§‘å®¤": ["ãƒãƒ”ã‚¨ãƒ", "ç©ºæ°—ç ²ã‚’ä½œã‚ã†ï¼ãã®ä»–é›»æµã«ã‚ˆã‚‹å®Ÿé¨“ã‚‚ã‚ã‚Šã¾ã™ã€‚", "ç§‘å­¦éƒ¨ã«ã‚ˆã‚‹ä½“é¨“å‹ã®å®Ÿé¨“å±•ç¤ºã€‚å®‰å…¨ã§æ¥½ã—ã„å®Ÿé¨“ãŒã„ã£ã±ã„ã€‚", "images/class_3_1.jpg"],
    "ãƒˆã‚¤ãƒ¬": ["ãƒˆã‚¤ãƒ¬", "ãŠæ‰‹æ´—ã„ã¯ã“ã¡ã‚‰", "æ ¡å†…ã®å„éšã«é…ç½®ã•ã‚Œã¦ã„ã¾ã™ã€‚å®‰å¿ƒã—ã¦ã”åˆ©ç”¨ãã ã•ã„ã€‚", "images/class_3_1.jpg"]
}

# 7 å¾Œã§inject_fadein_css()ï¼ˆãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã®cssï¼‰

# 7 å¾Œã§inject_fadeout_css()ï¼ˆãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆã®cssï¼‰

# 7 å¾Œã§inject_zoom_css()ï¼ˆã‚ºãƒ¼ãƒ ã‚¤ãƒ³ã®cssï¼‰

# 7 å¾Œã§set_main_background()ï¼ˆèƒŒæ™¯ç”»åƒã‚’ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã€ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆã™ã‚‹é–¢æ•°ï¼‰

# 3 å¾Œã§ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼ç”¨ã®userãƒ‡ãƒ¼ã‚¿
users = {"user1": "pass1", "user2": "pass2"}

# 4 å¾Œã§ã‚¯ãƒ©ã‚¹ä¼ç”»ã®class_projectãƒ‡ãƒ¼ã‚¿

# 5 å¾Œã§ã‚¤ãƒ™ãƒ³ãƒˆä¼ç”»ã®event_projectãƒ‡ãƒ¼ã‚¿

# 3 å¾Œã§ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã®åˆæœŸåŒ–
if 'logged_in' not in st.session_state:
    st.session_state.logged_in = False

# ä»¥ä¸‹ã€ç”»é¢ã‚’ä½œæˆ
# ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
def login():
    st.title("ğŸŒ æ–‡åŒ–ç¥­æ¡ˆå†…ã‚¢ãƒ—ãƒª")
    st.subheader("ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„")
    username = st.text_input("ãƒ¦ãƒ¼ã‚¶ãƒ¼å")
    password = st.text_input("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰", type="password")

    # 3 å¾Œã§ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã«å¤‰æ›´
    if st.button("ãƒ­ã‚°ã‚¤ãƒ³"):
        if username in users and users[username] == password:
            st.session_state.logged_in = True
            st.session_state.page = "main"  # âœ… ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã¸é·ç§»
            st.rerun()  # âœ… ã“ã“ã§ç”»é¢å†æç”»
        else:
            st.error("ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã¾ã™ã€‚")


# ãƒ¡ã‚¤ãƒ³ç”»é¢
def main_page():
    # 7 å¾Œã§æ–‡å­—ã¾ãŸã¯ç”»åƒã®ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã€ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆã«å¤‰æ›´
    st.title("ğŸŒŸ æ–‡åŒ–ç¥­ã‚¢ãƒ—ãƒªï¼")
    st.write("ç”»é¢å·¦ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€å„æ©Ÿèƒ½ã«ç§»å‹•ã§ãã¾ã™ã€‚")

    # 3 å¾Œã§è‡ªå‹•ã§ã®ç”»é¢é·ç§»
    time.sleep(5)
    st.session_state.page = "menu"
    st.rerun()


# ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢
def menu_page():
    # 7 ã‚ã¨ã§ã‚ºãƒ¼ãƒ ã‚¤ãƒ³å‡¦ç†ã®cssï¼ˆinject_zoom_css()ï¼‰+ãƒœã‚¿ãƒ³è¡¨ç¤ºã«ãƒ©ã‚°ã‚’è¿½åŠ ï¼ˆtime.sleep(0.5)ï¼‰
    
    st.header("ğŸ“‹ ãƒ¡ãƒ‹ãƒ¥ãƒ¼")
    st.write("æ–‡åŒ–ç¥­ã«é–¢ã™ã‚‹å„ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã§ãã¾ã™ã€‚")    

    if st.button("ğŸª ã‚¯ãƒ©ã‚¹ä¼ç”»ä¸€è¦§"):
        st.session_state.page = "class_list"# 3 æŠ¼ã—ãŸã‚‰ç”»é¢é·ç§»ã™ã‚‹å‡¦ç†ã«å¾Œã§å¤‰æ›´
        st.rerun()
    
    if st.button("ğŸ“… ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§"):
        st.session_state.page = "event_list"# 3 æŠ¼ã—ãŸã‚‰ç”»é¢é·ç§»ã™ã‚‹å‡¦ç†ã«å¾Œã§å¤‰æ›´
        st.rerun()
    
    if st.button("ğŸ« æ ¡å†…ãƒãƒƒãƒ—"):
        st.session_state.page = "map"# 3 æŠ¼ã—ãŸã‚‰ç”»é¢é·ç§»ã™ã‚‹å‡¦ç†ã«å¾Œã§å¤‰æ›´
        st.rerun()
    
    if st.button("ğŸ‰ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒšãƒ¼ã‚¸"):
        st.session_state.page = "message"# 3 æŠ¼ã—ãŸã‚‰ç”»é¢é·ç§»ã™ã‚‹å‡¦ç†ã«å¾Œã§å¤‰æ›´
        st.rerun()
    
    if st.button("ğŸ—³ æŠ•ç¥¨çµæœ"):
        st.session_state.page = "vote_result"# 3 æŠ¼ã—ãŸã‚‰ç”»é¢é·ç§»ã™ã‚‹å‡¦ç†ã«å¾Œã§å¤‰æ›´
        st.rerun()

# ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒšãƒ¼ã‚¸
def message_page():
    st.title("ğŸ‰ æ¥å ´è€…ã¸ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸")
    st.write("ã‚ˆã†ã“ãæ–‡åŒ–ç¥­ã¸ï¼æ¥½ã—ã„ä¼ç”»ãŒç››ã‚Šã ãã•ã‚“ã§ã™ã€‚ãœã²æœ€å¾Œã¾ã§ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚")

# æ ¡å†…ãƒãƒƒãƒ—ç”»é¢
def map_page():
    st.header("ğŸ« æ ¡å†…ãƒãƒƒãƒ—")

    # 6 å¾Œã§è¡¨ç¤ºã‚«ãƒ†ã‚´ãƒªã®ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹category
    # 6 å¾Œã§éƒ¨å±‹åã®æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹search_term

    # 6 å¾Œã§ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ç”»åƒã®ä½œæˆ
    st.image("images/map.png", use_container_width=True)
    st.write("åœ°å›³ä¸Šã®å ´æ‰€ã‚’å‚è€ƒã«ã—ã¦ã€å„ã‚¯ãƒ©ã‚¹ã®ä¼ç”»ç´¹ä»‹ãƒšãƒ¼ã‚¸ã¸ç§»å‹•ã§ãã¾ã™ã€‚")

    # 6 å¾Œã§æ¤œç´¢æ¡ä»¶ã«å¿œã˜ã¦ã€è¡¨ç¤ºã™ã‚‹ãƒœã‚¿ãƒ³ã‚’å¤‰ãˆã‚‹
    if st.button("1å¹´Açµ„ã®ä¼ç”»ã‚’è¦‹ã‚‹"):
        st.write('1-Aã®ä¼ç”»')
    if st.button("1å¹´Bçµ„ã®ä¼ç”»ã‚’è¦‹ã‚‹"):
        st.write('1-Bã®ä¼ç”»')


# 2 ã‚¯ãƒ©ã‚¹ä¼ç”»ä¸€è¦§ãƒšãƒ¼ã‚¸
def class_list_page():
    st.title("ğŸ« ã‚¯ãƒ©ã‚¹ä¼ç”»ä¸€è¦§")
    search = st.text_input("ã‚ã‚ã‚æ¤œç´¢")

    # 4 å¾Œã§æ¤œç´¢çµæœã«å¿œã˜ã¦ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹å‡¦ç†ã«å¤‰æ›´
    for room, (title, desc, _, _) in class_project.items():
        if search in room or search in title:
            st.subheader(f"{room}ï¼š{title}")
            st.write(desc)
            if st.button(f"{room} ã®ä¼ç”»ã‚’è¦‹ã‚‹", key=f"class_{room}"):
                st.session_state.selected_class = room
                st.session_state.page = "class_detail"
                st.session_state.map = False
                st.rerun()
            st.write("---------------------")


# 2 ã‚¯ãƒ©ã‚¹ä¼ç”»è©³ç´°
def class_detail_page():
    st.title("ğŸª ã‚¯ãƒ©ã‚¹ä¼ç”»è©³ç´°")
    
    # 4 å¾Œã§ä¼ç”»ä¸€è¦§ã€æ ¡å†…ãƒãƒƒãƒ—ä¸€è¦§ã§æŠ¼ã—ãŸãƒœã‚¿ãƒ³ã®ä¼ç”»è©³ç´°ã‚’è¡¨ç¤º
    

# ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§
def event_list_page():
    st.title("ğŸ“… ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§")
    day = st.selectbox("æ—¥ç¨‹ã‚’é¸æŠ", ["ã™ã¹ã¦", "1æ—¥ç›®", "2æ—¥ç›®", "3æ—¥ç›®"])
    search = st.text_input("ã‚¤ãƒ™ãƒ³ãƒˆåã§æ¤œç´¢")

    # 5 å¾Œã§æ¤œç´¢çµæœã«å¿œã˜ãŸãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹å‡¦ç†ã‚’è¨˜è¼‰



# ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°
def event_detail_page():
    st.title("ğŸ­ ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°")
    
    # 5 å¾Œã§ä¼ç”»ä¸€è¦§ãƒšãƒ¼ã‚¸ã§é¸ã‚“ã ä¼ç”»ã®è©³ç´°ã‚’è¡¨ç¤º


# ã‚¯ãƒ©ã‚¹æŠ•ç¥¨çµæœãƒšãƒ¼ã‚¸
def class_vote_result_page():
    st.title("ğŸ—³ ã‚¯ãƒ©ã‚¹ä¼ç”»æŠ•ç¥¨çµæœ")
    results = {
        "1å¹´Açµ„": 45,
        "1å¹´Bçµ„": 52,
        "2å¹´Açµ„": 38,
        "2å¹´Bçµ„": 60
    }
    st.write(results)


# ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼‰
def sidebar():
    st.sidebar.title("ğŸ“Œ ãƒ¡ãƒ‹ãƒ¥ãƒ¼")
    if st.sidebar.button("ãƒ¡ã‚¤ãƒ³ç”»é¢"):
        st.session_state.page = "main"# 3 å¾Œã§ãƒ¡ã‚¤ãƒ³ç”»åƒã«é·ç§»ã™ã‚‹å‡¦ç†ã«å¤‰æ›´
        st.rerun()
    if st.sidebar.button("ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸€è¦§"):
        st.session_state.page = "menu"# 3 å¾Œã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸€è¦§ç”»åƒã«é·ç§»ã™ã‚‹å‡¦ç†ã«å¤‰æ›´
        st.rerun()
    if st.sidebar.button("æ¥å ´ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"):
        st.session_state.page = "message"# 3 å¾Œã§æ¥å ´ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”»åƒã«é·ç§»ã™ã‚‹å‡¦ç†ã«å¤‰æ›´
        st.rerun()
    if st.sidebar.button("æ ¡å†…ãƒãƒƒãƒ—"):
        st.session_state.page = "map"# 3 å¾Œã§æ ¡å†…ãƒãƒƒãƒ—ç”»åƒã«é·ç§»ã™ã‚‹å‡¦ç†ã«å¤‰æ›´
        st.rerun()
    if st.sidebar.button("ã‚¯ãƒ©ã‚¹ä¼ç”»ä¸€è¦§"):
        st.session_state.page = "class_list"# 3 å¾Œã§ã‚¯ãƒ©ã‚¹ä¼ç”»ä¸€è¦§ç”»åƒã«é·ç§»ã™ã‚‹å‡¦ç†ã«å¤‰æ›´
        st.rerun()
    if st.sidebar.button("ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§"):
        st.session_state.page = "event_list"# 3 å¾Œã§ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ç”»åƒã«é·ç§»ã™ã‚‹å‡¦ç†ã«å¤‰æ›´
        st.rerun()
    if st.sidebar.button("æŠ•ç¥¨çµæœ"):
        st.session_state.page = "vote_result"# 3 å¾Œã§æŠ•ç¥¨çµæœç”»åƒã«é·ç§»ã™ã‚‹å‡¦ç†ã«å¤‰æ›´
        st.rerun()

    if st.sidebar.button("ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ"):
        st.session_state.logged_in = False # 3 å¾Œã§ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã™ã‚‹å‡¦ç†ã«å¤‰æ›´
        st.session_state.page = "main"
        st.rerun()

# 3 å¾Œã§ç”»é¢é·ç§»ã®ãŸã‚ã®main()ãƒ¡ã‚½ãƒƒã©ã‚’ä½œæˆ
def main():
    if 'logged_in' not in st.session_state:
        st.session_state.logged_in = False

    if not st.session_state.logged_in:
        login()
        return  # ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ãªã„å ´åˆã¯ä»–ã®æç”»ã‚’ã—ãªã„

    # ä»¥ä¸‹ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ãƒšãƒ¼ã‚¸è¡¨ç¤ºå‡¦ç†
    if 'page' not in st.session_state:
        st.session_state.page = "main"

    if st.session_state.page not in ['main', 'menu']:
        sidebar()

    if st.session_state.page == "main":
        main_page()
    elif st.session_state.page == "menu":
        menu_page()
    elif st.session_state.page == "message":
        message_page()
    elif st.session_state.page == "map":
        map_page()
    elif st.session_state.page == "class_list":
        class_list_page()
    elif st.session_state.page == "class_detail":
        class_detail_page()
    elif st.session_state.page == "event_list":
        event_list_page()
    elif st.session_state.page == "event_detail":
        event_detail_page()
    elif st.session_state.page == "vote_result":
        class_vote_result_page()


main() # 3 ç”»é¢æ“ä½œã‚’main()ã«å¤‰æ›´